<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MRR Quick Tracker</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 600px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 { text-align: center; margin-bottom: 30px; color: #333; }
        .form {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        input {
            flex: 1;
            min-width: 120px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        button {
            padding: 10px 20px;
            background: #4a7c59;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover { background: #3d6649; }
        .totals { display: flex; gap: 20px; margin: 20px 0; }
        .total {
            flex: 1;
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .total h3 { font-size: 12px; color: #666; text-transform: uppercase; }
        .total p { font-size: 24px; font-weight: bold; color: #333; margin-top: 5px; }
        table {
            width: 100%;
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #4a7c59; color: #fff; font-weight: 500; font-size: 13px; }
        tr:last-child td { border-bottom: none; }
        .delete { background: #c0392b; padding: 5px 10px; font-size: 12px; }
        .delete:hover { background: #a93226; }
    </style>
</head>
<body>
    <h1>MRR Quick Tracker</h1>

    <form class="form" id="entryForm">
        <input type="date" id="date" required />
        <input type="number" id="newCustomers" placeholder="New Customers" required />
        <input type="number" id="mrrDelta" placeholder="MRR Delta ($)" required />
        <button type="submit">Add</button>
    </form>

    <div class="totals">
        <div class="total">
            <h3>Total New Customers</h3>
            <p id="totalCustomers">0</p>
        </div>
        <div class="total">
            <h3>Total MRR Delta</h3>
            <p id="totalMrr">$0</p>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Customers</th>
                <th>MRR Delta</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="entriesTable"></tbody>
    </table>

    <script>
        const STORAGE_KEY = 'mrr_entries';
        let entries = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');

        function save() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(entries));
        }

        function formatCurrency(val) {
            return '$' + val.toLocaleString();
        }

        function render() {
            const tbody = document.getElementById('entriesTable');
            tbody.innerHTML = entries
                .map(
                    (e, i) => `
                <tr>
                    <td>${e.date}</td>
                    <td>${e.newCustomers}</td>
                    <td>${formatCurrency(e.mrrDelta)}</td>
                    <td><button class="delete" onclick="removeEntry(${i})">Ã—</button></td>
                </tr>
            `
                )
                .join('');

            const totals = entries.reduce(
                (acc, e) => ({
                    customers: acc.customers + e.newCustomers,
                    mrr: acc.mrr + e.mrrDelta,
                }),
                { customers: 0, mrr: 0 }
            );

            document.getElementById('totalCustomers').textContent = String(totals.customers);
            document.getElementById('totalMrr').textContent = formatCurrency(totals.mrr);
        }

        function removeEntry(index) {
            entries.splice(index, 1);
            save();
            render();
        }

        document.getElementById('entryForm').addEventListener('submit', (e) => {
            e.preventDefault();

            const date = document.getElementById('date').value;
            const newCustomers = parseInt(document.getElementById('newCustomers').value) || 0;
            const mrrDelta = parseFloat(document.getElementById('mrrDelta').value) || 0;

            entries.push({ date, newCustomers, mrrDelta });
            save();
            render();

            e.target.reset();
            document.getElementById('date').value = date;
        });

        // Default date = today
        document.getElementById('date').value = new Date().toISOString().slice(0, 10);
        render();
    </script>
</body>
</html>
